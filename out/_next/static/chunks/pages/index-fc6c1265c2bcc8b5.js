(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7846)}])},7846:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(7876),s=n(4232);let o=()=>(0,r.jsxs)("div",{className:"flex space-x-2 p-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-red-500 hover:bg-red-600 transition"}),(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-yellow-500 hover:bg-yellow-600 transition"}),(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-green-500 hover:bg-green-600 transition"})]});var a=n(3679);let l=e=>{let{isDarkMode:t,toggleTheme:n}=e;return(0,r.jsx)("button",{className:"absolute top-4 right-4 p-2 rounded-full shadow-md",onClick:n,title:t?"Switch to Light Mode":"Switch to Dark Mode",children:t?(0,r.jsx)(a.wQq,{className:"text-yellow-500"}):(0,r.jsx)(a.V6H,{className:"text-blue-500"})})};var i=n(4948),c=n(7979),d=n(1905);let h=e=>{let{message:t,isDarkMode:n,isCopied:s,onCopy:o}=e;return(0,r.jsxs)("div",{className:"mb-2 flex ".concat("bot"===t.type?"".concat(n?"bg-gray-900 text-white":"bg-white text-black"," p-3 rounded-lg items-center"):"justify-end"),children:["bot"===t.type?(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(i.o,{className:"".concat(n?"text-white":"text-black"),remarkPlugins:[c.A],rehypePlugins:[d.A],children:t.content})}):(0,r.jsx)("p",{className:"text-white",children:t.content}),"bot"===t.type&&(0,r.jsx)("button",{className:"ml-2 ".concat(n?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-black"),onClick:()=>o(t.content),title:"Copy to clipboard",children:s?(0,r.jsx)(a.CMH,{}):(0,r.jsx)(a.paH,{})})]})},g=e=>{let{input:t,loading:n,onInputChange:s,onKeyDown:o,onSend:a}=e;return(0,r.jsx)("div",{className:"flex items-center mb-4 w-full",children:(0,r.jsxs)("div",{className:"flex w-full bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 px-2 py-1",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 bg-transparent outline-none px-4 py-2 text-base rounded-xl border-none focus:ring-0 focus:border-none dark:text-white text-gray-900 placeholder-gray-400 dark:placeholder-gray-500",value:t,onChange:s,onKeyDown:o,placeholder:"Type your message..."}),(0,r.jsx)("button",{className:"ml-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold rounded-xl shadow hover:from-blue-600 hover:to-purple-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:a,disabled:n,children:n?(0,r.jsx)("span",{className:"animate-pulse",children:"Sending..."}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 inline-block mr-1",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M12 5l7 7-7 7"})})})]})})},u=e=>{let{voices:t,selectedVoice:n,isRecording:s,onVoiceSelect:o,onRecord:a,onStopRecording:l,onClearChat:i}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("select",{className:"p-2 mb-4 bg-gray-200 text-gray-900 rounded-lg text-sm sm:text-base w-full sm:w-auto dark:bg-gray-700 dark:text-white border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400",value:n,onChange:o,style:{boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:t.map(e=>(0,r.jsxs)("option",{value:e.name,className:"bg-white text-gray-900 dark:bg-gray-800 dark:text-white",children:[e.name," (",e.lang,")"]},e.name))}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{className:"p-2 rounded-lg ".concat(s?"bg-red-500":"bg-green-500"," text-white hover:bg-green-700 shadow-md"),onClick:a,disabled:s,children:s?"Recording...":"Record Voice"}),(0,r.jsx)("button",{className:"p-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-700 shadow-md",onClick:l,children:"Stop Recording"}),(0,r.jsx)("button",{className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-700 shadow-md",onClick:i,children:"Clear Chat"})]})]})},x=()=>{let[e,t]=(0,s.useState)([]),[n,a]=(0,s.useState)(""),[i,c]=(0,s.useState)(null),[d,x]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),[w,b]=(0,s.useState)(null),[y,f]=(0,s.useState)([]),[v,j]=(0,s.useState)(""),[S,k]=(0,s.useState)(null),[N,C]=(0,s.useState)(!0),[_,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"light"===localStorage.getItem("theme")?(C(!1),document.documentElement.classList.remove("dark")):(C(!0),document.documentElement.classList.add("dark"));let e=()=>{if(window.speechSynthesis){let e=window.speechSynthesis.getVoices();f(e),e.length>0&&j(e[0].name)}};return e(),window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=e),()=>{window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=null)}},[]);let M=async function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.trim()){t(t=>[...t,{type:"user",content:n?"You (Voice): ".concat(e):e}]),x(!0),a("");try{let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),s=(await r.json()).message||"Sorry, I couldn't understand that.";if(t(e=>[...e,{type:"bot",content:s}]),n&&1){let e=s.replace(/<\/?[^>]+(>|$)/g,"");S&&window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e),n=y.find(e=>e.name===v);n&&(t.voice=n),k(t),window.speechSynthesis.speak(t)}}catch(e){console.error("Error sending message:",e),t(e=>[...e,{type:"bot",content:"Sorry, something went wrong."}])}x(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen ".concat(N?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"," flex flex-col items-center justify-center px-4 py-8"),children:[(0,r.jsx)(l,{isDarkMode:N,toggleTheme:()=>{let e=!N;C(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("theme",e?"dark":"light")}}),(0,r.jsx)("div",{className:"gradient-border w-full sm:w-[800px] p-6 sm:p-8 md:p-2 border border-gray-200 dark:border-gray-600 rounded-lg",children:(0,r.jsxs)("div",{className:"inner-container ".concat(N?"bg-gray-800":"bg-white"),children:[(0,r.jsxs)("h1",{className:"text-2xl font-extrabold mb-4 text-center ".concat(N?"text-white":"text-gray-900"),children:[(0,r.jsx)(o,{})," VS-GPT"]}),(0,r.jsx)("div",{className:"h-96 overflow-auto p-4 border rounded-lg mb-4 ".concat(N?"bg-gray-700 border-gray-300":"bg-gray-100 border-gray-300"),children:0===e.length?(0,r.jsx)("p",{className:"text-center ".concat(N?"text-white":"text-gray-700"),children:"Start the conversation!"}):e.map((e,t)=>(0,r.jsx)(h,{message:e,isDarkMode:N,isCopied:_,onCopy:e=>{navigator.clipboard.writeText(e),E(!0),setTimeout(()=>E(!1),2e3)}},t))}),(0,r.jsx)(g,{input:n,loading:d,onInputChange:e=>a(e.target.value),onKeyDown:t=>{if("Enter"===t.key)M(n),c(null);else if("ArrowUp"===t.key){let t=e.filter(e=>"user"===e.type);if(0===t.length)return;c(e=>{let n=null===e?t.length-1:Math.max(e-1,0);return a(t[n].content),n})}else if("ArrowDown"===t.key){let t=e.filter(e=>"user"===e.type);if(0===t.length)return;c(e=>{var n;let r=null===e?0:Math.min(e+1,t.length-1);return a((null==(n=t[r])?void 0:n.content)||""),r})}},onSend:()=>M(n)}),(0,r.jsx)(u,{voices:y,selectedVoice:v,isRecording:p,onVoiceSelect:e=>j(e.target.value),onRecord:()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Your browser does not support speech recognition.");let t=new e;t.lang="en-US",t.interimResults=!1,t.onstart=()=>m(!0),t.onend=()=>m(!1),t.onresult=e=>{M(e.results[0][0].transcript,!0)},t.onerror=e=>{console.error("Speech recognition error:",e.error),m(!1)},t.start(),b(t)},onStopRecording:()=>{S&&(window.speechSynthesis.cancel(),k(null)),w&&(w.stop(),m(!1),b(null))},onClearChat:()=>t([])})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[938,373,636,593,792],()=>t(6760)),_N_E=e.O()}]);